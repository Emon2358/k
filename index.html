<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>コンテンツ検索</title>
</head>
<body>
    <h1>コンテンツ検索</h1>

    <label for="search-query">検索ワード:</label>
    <input type="text" id="search-query" placeholder="検索するワードを入力">
    <button onclick="searchContent()">検索</button>

    <div id="result"></div>

    <script>
        // CORS制限を回避するためにプロキシAPIを利用して検索結果を取得する関数
        async function searchContent() {
            const query = document.getElementById("search-query").value.trim();
            if (!query) {
                alert("検索ワードを入力してください");
                return;
            }

            // プロキシAPIを利用して、Google検索を経由してコンテンツを取得
            const proxyUrl = "https://api.allorigins.win/raw?url=";
            const targetUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            const apiUrl = proxyUrl + encodeURIComponent(targetUrl);

            try {
                const response = await fetch(apiUrl, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json', // プロキシAPIのレスポンス形式を指定
                    },
                });

                if (response.ok) {
                    const data = await response.text(); // HTMLとして取得
                    // 検索結果を表示
                    document.getElementById("result").innerHTML = `
                        <h2>検索結果:</h2>
                        <pre>${data}</pre>
                    `;
                } else {
                    throw new Error("リクエストに失敗しました");
                }
            } catch (error) {
                console.error("Error:", error);
                document.getElementById("result").innerHTML = `<p style="color: red;">エラーが発生しました。後ほど再試行してください。</p>`;
            }
        }
    </script>
</body>
</html>
